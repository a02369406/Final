<!-- Page Title -->
<div class="page-title" data-aos="fade">
  <div class="heading">
    <div class="container">
      <div class="row d-flex justify-content-center text-center">
        <div class="col-lg-8">
          <h1>Random User API</h1>
          <p class="mb-0">
            This page demonstrates integration with the Random User API, which generates random user data for testing and development purposes.
          </p>
        </div>
      </div>
    </div>
  </div>
  <nav class="breadcrumbs">
    <div class="container">
      <ol>
        <li><a href="/">Home</a></li>
        <li class="current">External API</li>
      </ol>
    </div>
  </nav>
</div>
<!-- End Page Title -->

<!-- External API Section -->
<section id="external-api" class="section">
  <div class="container">
    <div class="row mb-4">
      <div class="col-lg-12">
        <form action="/externalapi" method="get" class="php-email-form">
          <div class="row">
            <div class="col-md-6">
              <label for="count" class="form-label">Number of Users to Generate</label>
              <input
                type="number"
                class="form-control"
                id="count"
                name="count"
                min="1"
                max="100"
                value="<%= count || 1 %>"
                required
              />
              <small class="form-text text-muted">Enter a number between 1 and 100</small>
            </div>
            <div class="col-md-6 d-flex align-items-end">
              <button type="submit" class="btn btn-primary">Fetch Random Users</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <% if (error) { %>
    <div class="alert alert-danger" role="alert">
      <%= error %>
    </div>
    <% } %>

    <% if (users && users.length > 0) { %>
    <div class="row">
      <% users.forEach((user, index) => { %>
      <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="<%= index * 100 %>">
        <div class="card h-100">
          <div class="card-body text-center">
            <img
              src="<%= user.picture.large %>"
              alt="<%= user.name.first %> <%= user.name.last %>"
              class="rounded-circle mb-3"
              style="width: 150px; height: 150px; object-fit: cover;"
            />
            <h5 class="card-title">
              <%= user.name.title %> <%= user.name.first %> <%= user.name.last %>
            </h5>
            <p class="card-text">
              <strong>Email:</strong> <%= user.email %><br />
              <strong>Phone:</strong> <%= user.phone %><br />
              <strong>Location:</strong> <%= user.location.city %>, <%= user.location.country %><br />
              <strong>Age:</strong> <%= user.dob.age %><br />
              <strong>Gender:</strong> <%= user.gender %>
            </p>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
    <% } else if (!error) { %>
    <div class="alert alert-info" role="alert">
      Use the form above to fetch random user data.
    </div>
    <% } %>
  </div>
</section>
<!-- End External API Section -->

